<%- include("templates/headerloggedinMAP", { overflowVariable: '' }) %>
  <link href="/hoverglow.css" rel="stylesheet" type="text/css">
  <style>
    body {
      background-image: url('/indexBG.png');
      background-size: cover;
      background-position: top;
      background-attachment: fixed;
      min-height: 100vh;

    }

    .outer-grid {
      background-image: url('/parchment.svg');
      background-size: contain;
      background-repeat: no-repeat;
      margin-top: 15px;
    }

    .middle-grid {
      padding-left: 60px;
      padding-bottom: 50px;
    }


    .redShadow {
      text-shadow: -2px 0px #000000, 0px -2px #000000;
    }
  </style>
  <div class="outer-grid max-w-md mx-auto">
    <div class ="middle-grid pt-3 ml-1">
      <div class="grid grid-rows-9 p-4 max-w-md mx-auto">
        <%- include("templates/mapTemplates/row", {arr: path.row4, active: path.r4active, row: 4}) %>
          <%- include("templates/mapTemplates/connections", {rowConnect: path.r3connect}) %>
            <%- include("templates/mapTemplates/row", {arr: path.row3, active: path.r3active, row: 3}) %>
              <%- include("templates/mapTemplates/connections", {rowConnect: path.r2connect}) %>
                <%- include("templates/mapTemplates/row", {arr: path.row2, active: path.r2active, row: 2}) %>
                  <%- include("templates/mapTemplates/connections", {rowConnect: path.r1connect}) %>
                    <%- include("templates/mapTemplates/row", {arr: path.row1, active: path.r1active, row: 1}) %>
                      <%- include("templates/mapTemplates/connections", {rowConnect: path.r0connect}) %>
                        <%- include("templates/mapTemplates/row", {arr: path.row0, active: path.r0active, row: 0}) %>
      </div>
    </div>
  </div>
  <div class="grid max-w-md mx-auto py-4">
    <form action="/mapreset" method="post" class="mx-auto">
      <input type="hidden" name="id" value="<%- id %>">
      <button type="submit" class="pixel-button-red py-2 px-4 mx-5 redShadow" alt="home"
        value="Reset and Start from the Beginning">Reset and <br> Start Over</button>
    </form>
  </div>
  <div id="warningModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 hidden">
    <div class="bg-white rounded-lg p-8 text-center">
      <h2 class="text-xl basicPixel mb-4">Welcome to the map page, brave adventurer! Chart your path through the crypt,
        collect precious gems, and discover a treasure chest at the journey's end. Click on the map legend for more
        information!</h2>
      <div class="flex justify-center space-x-4">
        <button onclick="hideModal()" class="basicPixel px-4 py-2 bg-gray-300 rounded-lg">Exit</button>
      </div>
    </div>
  </div>

  <script>
    function showModal() {
      document.getElementById('warningModal').classList.remove('hidden');
    }

    function hideModal() {
      document.getElementById('warningModal').classList.add('hidden');

      //Code below is used in tandem with the code from informationIcon.ejs
      document.getElementById("image").src = "i_orange.svg";
      clicked = false;
    }

    function confirmStartGame() {
      window.location.href = '/map';
    }
  </script>

  <%- include("templates/informationIcon") %>
  <%- include("templates/footer") %>